(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{C06z:function(e,t,n){"use strict";n.r(t);n("1mXb");var r=n("iJl9"),a=n.n(r),o=(n("1Wva"),n("FAat")),i=n.n(o),l=(n("q5v/"),n("QpBz")),c=n.n(l),u=n("q1tI"),s=n.n(u),p=n("vDqi"),h=n.n(p),f=n("eO8H"),b=n("j5fn"),y=n("UQ5x"),m=n("rOIg"),v=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var d=i.a.Option,g=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={title:"",tab:""},t.publishRichText=t.publishRichText.bind(t),t.handleChange=t.handleChange.bind(t),t.getTitle=t.getTitle.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.a.Component),v(n,[{key:"componentWillMount",value:function(){var e=m.a.isLogin(),t=this.props,n=t.history,r=t.match;if(!e)return c.a.warn("您处于未登录状态，2秒后自动跳装至登录页面"),setTimeout(function(){n.push("/login",{preUrl:r.path})},2e3),!1}},{key:"publishRichText",value:function(e){var t=y.a.POST_TOPIC;h.a.post(t,{accesstoken:localStorage.getItem("userToken"),title:this.state.title,tab:this.state.tab,content:e}).then(function(e){c.a.success("发布成功")}).catch(function(e){c.a.error(e.response.data.error_msg)})}},{key:"handleChange",value:function(e){this.setState({tab:e})}},{key:"getTitle",value:function(e){this.setState({title:e.target.value})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h3",{className:"block-title mt20"},s.a.createElement(f.b,{to:"/"},"首页"),s.a.createElement("span",{className:"bread-split"},"/"),"发布话题"),s.a.createElement(i.a,{placeholder:"请选择一个版块",style:{width:200,marginTop:"20px"},onChange:this.handleChange},s.a.createElement(d,{value:"share"},"分享"),s.a.createElement(d,{value:"job"},"招聘"),s.a.createElement(d,{value:"ask"},"问答"),s.a.createElement(d,{value:"dev"},"测试")),s.a.createElement(a.a,{placeholder:"请输入标题",onBlur:this.getTitle,style:{margin:"20px 0px"}}),s.a.createElement(b.a,{richTextSet:{height:400},publishRichText:this.publishRichText}))}}]),n}();t.default=g},j5fn:function(e,t,n){"use strict";n("bAY4");var r=n("4IMT"),a=n.n(r),o=n("q1tI"),i=n.n(o),l=n("lj4J"),c=n.n(l),u=(n("auUr"),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),s=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var p=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.addReply=t.addReply.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.a.Component),s(n,[{key:"addReply",value:function(){var e=this.editorInstance.getContent("html");this.props.publishRichText(e),this.editorInstance.setContent("","html")}},{key:"render",value:function(){var t=this,e=this.props.richTextSet;return i.a.createElement("div",null,i.a.createElement("div",{className:"rich-text"},i.a.createElement(c.a,u({},e,{ref:function(e){return t.editorInstance=e}}))),i.a.createElement(a.a,{type:"primary",onClick:this.addReply,className:"mt20"},"回复"))}}]),n}();t.a=p}}]);