!function(u){function e(e){for(var t,n,r=e[0],o=e[1],a=e[2],i=0,c=[];i<r.length;i++)n=r[i],s[n]&&c.push(s[n][0]),s[n]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(u[t]=o[t]);for(m&&m(e);c.length;)c.shift()();return f.push.apply(f,a||[]),l()}function l(){for(var e,t=0;t<f.length;t++){for(var n=f[t],r=!0,o=1;o<n.length;o++){var a=n[o];0!==s[a]&&(r=!1)}r&&(f.splice(t--,1),e=p(p.s=n[0]))}return e}var n={},s={9:0},f=[];function p(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return u[e].call(t.exports,t,t.exports,p),t.l=!0,t.exports}p.e=function(a){var e,t=[],n=s[a];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(e,t){n=s[a]=[e,t]});t.push(n[2]=r);var o,i=document.createElement("script");i.charset="utf-8",i.timeout=120,p.nc&&i.setAttribute("nonce",p.nc),i.src=p.p+""+({2:"Collect",3:"Login",4:"Message",5:"PublishTopic",6:"Topic",7:"TopicDetail",8:"UserDetail"}[e=a]||e)+"-"+{2:"8a43b5c5",3:"02dd9bbd",4:"fe0d4b24",5:"19842217",6:"4e9c8170",7:"595e06e1",8:"1218457e"}[e]+".js",o=function(e){i.onerror=i.onload=null,clearTimeout(c);var t=s[a];if(0!==t){if(t){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,o=new Error("Loading chunk "+a+" failed.\n("+n+": "+r+")");o.type=n,o.request=r,t[1](o)}s[a]=void 0}};var c=setTimeout(function(){o({type:"timeout",target:i})},12e4);i.onerror=i.onload=o,document.head.appendChild(i)}return Promise.all(t)},p.m=u,p.c=n,p.d=function(e,t,n){p.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},p.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.t=function(t,e){if(1&e&&(t=p(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(p.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)p.d(n,r,function(e){return t[e]}.bind(null,r));return n},p.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return p.d(t,"a",t),t},p.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},p.p="",p.oe=function(e){throw console.error(e),e};var t=window.webpackJsonp=window.webpackJsonp||[],r=t.push.bind(t);t.push=e,t=t.slice();for(var o=0;o<t.length;o++)e(t[o]);var m=r;f.push([497,1,0]),l()}({127:function(e,t,n){"use strict";var r=" https://cnodejs.org/api/v1",o={GET_TOPICS:r+"/topics",GET_TOPIC_DETAIL:r+"/topic/{topicId}",POST_TOPIC:r+"/topics",EDIT_TOPIC:r+"/topics/update",COLLECT_TOPIC:r+"/topic_collect/collect",DE_COLLECT_TOPIC:r+"/topic_collect/de_collect",NEW_REPLY:r+"/topic/{topicId}/replies",GOOD_REPLY:r+"/reply/{replyId}/ups",USER_COLLECT_TOPIC:r+"/topic_collect/{loginname}",USER_DETAIL:r+"/user/{loginname}",USER_MESSAGE_ALL:r+"/messages",USER_MESSAGE_UNREAD:r+"/message/count",MARK_MESSAGE:r+"/message/mark_one/{msgId}",MARK_MESSAGE_ALL:r+"/message/mark_all",LOGIN:r+"/accesstoken"};t.a=o},206:function(e,t,n){e.exports=n.p+"cnodejs-86f6a7c2f6cf9844d8a9f5d088d87406.svg"},33:function(e,t,n){"use strict";var r={isLogin:function(){return!!localStorage.getItem("userToken")},logout:function(){localStorage.clear()},getCurrentUserInfo:function(){return JSON.parse(localStorage.getItem("userInfo"))},formatTime:function(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,o=t.getDate(),a=t.getHours(),i=t.getMinutes(),c=t.getSeconds();return r=u(r),o=u(o),a=u(a),i=u(i),c=u(c),n+"-"+r+"-"+o+" "+a+":"+i+":"+c},curTab:function(e){e.classList.add("current-tab"),function(e){for(;e.nextElementSibling;)e.nextElementSibling.classList.remove("current-tab"),e=e.nextElementSibling}(e),function(e){for(;e.previousElementSibling;)e.previousElementSibling.classList.remove("current-tab"),e=e.previousElementSibling}(e)}};function u(e){return e<10?"0"+e:e}t.a=r},497:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(6),o=n.n(r),c=n(16),u=(n(81),n(50)),l=n.n(u),s=(n(272),n(203)),f=n.n(s),p=(n(277),n(204)),m=n.n(p),h=(n(278),n(279),n(280),n(281),n(282),n(205)),b=n.n(h),g=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var y=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),g(t,[{key:"render",value:function(){return i.a.createElement(b.a,{visibilityHeight:100},i.a.createElement("div",{className:"ant-back-top-inner"},"UP"))}}]),t}(),d=n(206),v=n.n(d),E=(n(289),n(207)),_=n.n(E),O=(n(208),n(125)),w=n.n(O),C=n(126),P=n.n(C),j=n(127),S=n(33),T=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var M=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.getNotReadMsgCount=t.getNotReadMsgCount.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.a.Component),T(n,[{key:"getNotReadMsgCount",value:function(){if(S.a.isLogin()){var e=j.a.USER_MESSAGE_UNREAD,t=this;P.a.get(e,{params:{accesstoken:localStorage.getItem("userToken")}}).then(function(e){t.props.changeMsgCount(e.data.data)}).catch(function(e){w.a.error(e)})}}},{key:"componentWillMount",value:function(){this.getNotReadMsgCount()}},{key:"render",value:function(){return i.a.createElement(_.a,{style:{top:"-12px"},count:this.props.msgCount})}}]),n}(),k=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var L=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={isLogin:S.a.isLogin()},t.logout=t.logout.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.a.Component),k(n,[{key:"logout",value:function(){S.a.logout(),this.setState({isLogin:!1}),this.props.changeMsgCount(0)}},{key:"render",value:function(){var e=S.a.isLogin(),t=void 0,n=void 0;return e&&(t=S.a.getCurrentUserInfo().loginname,n=S.a.getCurrentUserInfo().avatar_url),i.a.createElement("div",{className:"head"},i.a.createElement(c.b,{href:"javascript:;",className:"cnode-logo",to:"/"},i.a.createElement("img",{src:v.a,width:"200"})),!e&&i.a.createElement(c.b,{to:"/login",className:"float-right mr20"},"登录"),e&&i.a.createElement("div",{className:"float-right mr20"},i.a.createElement(c.b,{to:"/user/"+t,className:"mr20"},i.a.createElement("img",{src:n,className:"ava"})),i.a.createElement("a",{href:"javascript:;",onClick:this.logout},"注销")),i.a.createElement(c.b,{to:"/user/message",className:"float-right mr20"},"我的消息",i.a.createElement(M,{msgCount:this.props.msgCount,changeMsgCount:this.props.changeMsgCount})),i.a.createElement(c.b,{to:"/user/collect",className:"float-right mr20"},"我的收藏"),i.a.createElement(c.b,{to:"/user/publish",className:"float-right mr20"},"发布话题"))}}]),n}(),I=n(124),x=n.n(I),N=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function R(o){return function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={component:null},t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a["Component"]),N(n,[{key:"componentDidMount",value:(t=x.a.mark(function e(){var t,n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:t=e.sent,n=t.default,this.setState({component:n});case 5:case"end":return e.stop()}},e,this)}),r=function(){var c=t.apply(this,arguments);return new Promise(function(a,i){return function t(e,n){try{var r=c[e](n),o=r.value}catch(e){return void i(e)}if(!r.done)return Promise.resolve(o).then(function(e){t("next",e)},function(e){t("throw",e)});a(o)}("next")})},function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this.state.component;return e?i.a.createElement(e,this.props):null}}]),n}()}var A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var U=R(function(){return Promise.all([n.e(1),n.e(0),n.e(6)]).then(n.bind(null,520))}),G=R(function(){return Promise.all([n.e(1),n.e(0),n.e(7)]).then(n.bind(null,519))}),H=R(function(){return Promise.all([n.e(1),n.e(0),n.e(8)]).then(n.bind(null,515))}),J=R(function(){return Promise.all([n.e(1),n.e(0),n.e(3)]).then(n.bind(null,516))}),Y=R(function(){return Promise.all([n.e(1),n.e(0),n.e(4)]).then(n.bind(null,521))}),F=R(function(){return Promise.all([n.e(1),n.e(0),n.e(2)]).then(n.bind(null,517))}),K=R(function(){return Promise.all([n.e(1),n.e(0),n.e(5)]).then(n.bind(null,518))}),W=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),D(t,[{key:"render",value:function(){var t=this;return i.a.createElement(c.d,null,i.a.createElement(c.c,{exact:!0,path:"/",component:U}),i.a.createElement(c.c,{path:"/topic/:id",component:G}),i.a.createElement(c.c,{path:"/login",component:J}),i.a.createElement(c.c,{path:"/user/message",render:function(e){return i.a.createElement(Y,A({changeMsgCount:t.props.changeMsgCount},e))}}),i.a.createElement(c.c,{path:"/user/collect",component:F}),i.a.createElement(c.c,{path:"/user/publish",component:K}),i.a.createElement(c.c,{path:"/user/:username",component:H}))}}]),t}(),q=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();l.a.Header,l.a.Footer;var B=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={msgCount:""},t.changeMsgCount=t.changeMsgCount.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.a.Component),q(n,[{key:"changeMsgCount",value:function(e){this.setState({msgCount:e})}},{key:"render",value:function(){return i.a.createElement(l.a,{className:"layout"},i.a.createElement(f.a,null,i.a.createElement(m.a,{span:18,offset:3},i.a.createElement(L,{msgCount:this.state.msgCount,changeMsgCount:this.changeMsgCount}),i.a.createElement("div",{className:"main"},i.a.createElement(W,{changeMsgCount:this.changeMsgCount})))),i.a.createElement(y,null))}}]),n}();o.a.render(i.a.createElement(c.a,null,i.a.createElement(B,null)),document.getElementById("app"))}});